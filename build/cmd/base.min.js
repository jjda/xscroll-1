define(function(n,i,u){var t=n("./util"),p=n("./events"),l=function(){};return t.mix(l.prototype,p),t.mix(l.prototype,{plug:function(n){var i=this;if(n&&n.pluginId){i.__plugins||(i.__plugins=[]);var u=i.getPlugin(n.pluginId);return u&&i.unplug(n.pluginId),n.pluginInitializer(i),i.__plugins.push(n),i}},unplug:function(n){var i=this;if(n){var u="string"==typeof n?i.getPlugin(n):n;u.pluginDestructor(i);for(var t in i.__plugins)if(i.__plugins[t]==u)return i.__plugins.splice(t,1)}},getPlugin:function(n){var i=this,u=[];for(var t in i.__plugins)i.__plugins[t]&&i.__plugins[t].pluginId==n&&u.push(i.__plugins[t]);return u.length>1?u:u[0]||null}}),"object"==typeof u&&u.exports?void(u.exports=l):l});
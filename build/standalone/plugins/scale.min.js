!function(){var t,n,e,r,i,a,s;t=function(t){function n(){}function e(t,e){var r;return Object.create?r=Object.create(t):(n.prototype=t,r=new n),r.constructor=e,r}for(var r=/\\?\{([^{}]+)\}/g,i="",a=/^[\s\xa0]+|[\s\xa0]+$/g,s=String.prototype.trim,o=0,c=function(t){var n=++o+"";return t?t+n:n},l=({isObject:function(t){return t===Object(t)},isArray:Array.isArray||function(t){return"[object Array]"==toString.call(t)},isEmpty:function(t){if(null==t)return!0;if(this.isArray(t)||this.isString(t))return 0===t.length;for(var n in t)if(this.has(t,n))return!1;return!0},mix:function(t,n){for(var e in n)t[e]=n[e];return t},extend:function(t,n,r,i){if(!n||!t)return t;var a,s=n.prototype;return a=e(s,t),t.prototype=this.mix(a,t.prototype),t.superclass=e(s,n),r&&this.mix(a,r),i&&this.mix(t,i),t},startsWith:function(t,n){return 0===t.lastIndexOf(n,0)},endsWith:function(t,n){var e=t.length-n.length;return e>=0&&t.indexOf(n,e)===e},trim:s?function(t){return null==t?i:s.call(t)}:function(t){return null==t?i:(t+"").replace(a,i)},substitute:function(t,n,e){return"string"==typeof t&&n?t.replace(e||r,function(t,e){return"\\"===t.charAt(0)?t.slice(1):void 0===n[e]?i:n[e]}):t},vendor:function(){for(var t,n=document.createElement("div").style,e=["t","webkitT","MozT","msT","OT"],r=0,i=e.length;i>r;r++)if(t=e[r]+"ransform",t in n)return e[r].substr(0,e[r].length-1);return!1}(),prefixStyle:function(t){return this.vendor===!1?!1:""===this.vendor?t:this.vendor+t.charAt(0).toUpperCase()+t.substr(1)},hasClass:function(t,n){return t&&t.className&&n&&-1!=t.className.indexOf(n)},addClass:function(t,n){t&&n&&!this.hasClass(t,n)&&(t.className+=" "+n)},removeClass:function(t,n){t&&t.className&&n&&(t.className=t.className.replace(n,""))},getOffsetTop:function(t){var n=t.offsetTop;return null!=t.offsetParent&&(n+=this.getOffsetTop(t.offsetParent)),n},getOffsetLeft:function(t){var n=t.offsetLeft;return null!=t.offsetParent&&(n+=this.getOffsetLeft(t.offsetParent)),n},findParentEl:function(t,n,e){var r=null;if(e=e||document.body,t&&n){if(t.className.match(n.replace(/\.|#/g,"")))return t;for(;!r&&(r=t.parentNode,t!=e);){if(r)return r;t=t.parentNode}return null}},guid:c,isAndroid:function(){return/Android /.test(window.navigator.appVersion)},isBadAndroid:function(){return/Android /.test(window.navigator.appVersion)&&!/Chrome\/\d/.test(window.navigator.appVersion)},px2Num:function(t){return Number(t.replace(/px/,""))}}),u=["Arguments","Function","String","Number","Date","RegExp"],f=0;f<u.length;f++)l["is"+u[f]]=function(t){return toString.call(t)=="[object "+u[f]+"]"};return"object"==typeof module&&module.exports?t=l:l}({}),a=function(n){var e=t,r=function(t){var n,e=!1;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}},i={on:function(t,n,e){if(!s(this,"on",t,[n,e])||!n)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:n,context:e,ctx:e||this}),this},once:function(t,n,e){if(!s(this,"once",t,[n,e])||!n)return this;var i=this,a=r(function(){i.off(t,a),n.apply(this,arguments)});return a._callback=n,this.on(t,a,e)},off:function(t,n,e){if(!this._events||!s(this,"off",t,[n,e]))return this;if(!t&&!n&&!e)return this._events=void 0,this;for(var r=t?[t]:Object.keys(this._events),i=0,a=r.length;a>i;i++){t=r[i];var o=this._events[t];if(o)if(n||e){for(var c=[],l=0,u=o.length;u>l;l++){var f=o[l];(n&&n!==f.callback&&n!==f.callback._callback||e&&e!==f.context)&&c.push(f)}c.length?this._events[t]=c:delete this._events[t]}else delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var n=Array.prototype.slice.call(arguments,1);if(!s(this,"trigger",t,n))return this;var e=this._events[t],r=this._events.all;return e&&o(e,n),r&&o(r,arguments),this},listenTo:function(t,n,r){var i=this._listeningTo||(this._listeningTo={}),a=t._listenId||(t._listenId=e.guid("l"));return i[a]=t,r||"object"!=typeof n||(r=this),t.on(n,r,this),this},listenToOnce:function(t,n,e){if("object"==typeof n){for(var i in n)this.listenToOnce(t,i,n[i]);return this}var a=r(function(){this.stopListening(t,n,a),e.apply(this,arguments)});return a._callback=e,this.listenTo(t,n,a)},stopListening:function(t,n,r){var i=this._listeningTo;if(!i)return this;var a=!n&&!r;r||"object"!=typeof n||(r=this),t&&((i={})[t._listenId]=t);for(var s in i)t=i[s],t.off(n,r,this),(a||e.isEmpty(t._events))&&delete this._listeningTo[s];return this}},a=/\s+/,s=function(t,n,e,r){if(!e)return!0;if("object"==typeof e){for(var i in e)t[n].apply(t,[i,e[i]].concat(r));return!1}if(a.test(e)){for(var s=e.split(a),o=0,c=s.length;c>o;o++)t[n].apply(t,[s[o]].concat(r));return!1}return!0},o=function(t,n){var e,r=-1,i=t.length,a=n[0],s=n[1],o=n[2];switch(n.length){case 0:for(;++r<i;)(e=t[r]).callback.call(e.ctx);return;case 1:for(;++r<i;)(e=t[r]).callback.call(e.ctx,a);return;case 2:for(;++r<i;)(e=t[r]).callback.call(e.ctx,a,s);return;case 3:for(;++r<i;)(e=t[r]).callback.call(e.ctx,a,s,o);return;default:for(;++r<i;)(e=t[r]).callback.apply(e.ctx,n);return}};return i.bind=i.on,i.unbind=i.off,"object"==typeof module&&module.exports?n=i:i}({}),n=function(n){var e=t,r=a,i=function(){};return e.mix(i.prototype,r),e.mix(i.prototype,{plug:function(t){var n=this;if(t&&t.pluginId){n.__plugins||(n.__plugins=[]);var e=n.getPlugin(t.pluginId);return e&&n.unplug(t.pluginId),t.pluginInitializer(n),n.__plugins.push(t),n}},unplug:function(t){var n=this;if(t){var e="string"==typeof t?n.getPlugin(t):t;e.pluginDestructor(n);for(var r in n.__plugins)if(n.__plugins[r]==e)return n.__plugins.splice(r,1)}},getPlugin:function(t){var n=this,e=[];for(var r in n.__plugins)n.__plugins[r]&&n.__plugins[r].pluginId==t&&e.push(n.__plugins[r]);return e.length>1?e:e[0]||null}}),"object"==typeof module&&module.exports?n=i:i}({}),s=function(t){var n={linear:[0,0,1,1],ease:[.25,.1,.25,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1],quadratic:[.33,.66,.66,1],circular:[.1,.57,.1,1],bounce:[.71,1.35,.47,1.41],format:function(t){return t?"string"==typeof t&&this[t]?this[t]instanceof Array?[" cubic-bezier(",this[t],") "].join(""):this[t]:t instanceof Array?[" cubic-bezier(",t,") "].join(""):t:void 0}};return"object"==typeof module&&module.exports?t=n:n}({}),e=function(e){function r(t,n,e,r,i){var a=function(n){var r=1-n;return 3*r*r*n*t+3*r*n*n*e+n*n*n},s=function(t){var e=1-t;return 3*e*e*t*n+3*e*t*t*r+t*t*t},o=function(n){var r=1-n;return 3*(2*(n-1)*n+r*r)*t+3*(-n*n*n+2*r*n)*e};return function(t){var n,e,r,c,l,u,f=t;for(r=f,u=0;8>u;u++){if(c=a(r)-f,Math.abs(c)<i)return s(r);if(l=o(r),Math.abs(l)<1e-6)break;r-=c/l}if(n=0,e=1,r=f,n>r)return s(n);if(r>e)return s(e);for(;e>n;){if(c=a(r),Math.abs(c-f)<i)return s(r);f>c?n=r:e=r,r=.5*(e-n)+n}return s(r)}}function i(t){var n=this;n.cfg=a.mix({easing:"linear"},t)}for(var a=t,o=n,c=s,l=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},u=["webkit","moz","ms","o"],f=window.cancelAnimationFrame,d=0;d<u.length;d++)(window[u[d]+"CancelAnimationFrame"]||window[u[d]+"CancelRequestAnimationFrame"])&&(f=window[u[d]+"CancelAnimationFrame"]||window[u[d]+"CancelRequestAnimationFrame"]);return f=f||window.clearTimeout,i.MIN_DURATION=1,a.extend(i,o,{reset:function(t){var n=this;a.mix(n.cfg,t),n.isfinished=!1,n.percent=0,delete n._stop},run:function(){var t=this,n=t.cfg.duration;if(n<=i.MIN_DURATION&&(t.isfinished=!0,t.trigger("run",{percent:1}),t.trigger("end",{percent:1})),!t.isfinished){t._hasFinishedPercent=t._stop&&t._stop.percent||0,delete t._stop,t.start=Date.now(),t.percent=0;var e=1e3/60/n/4,a=c[t.cfg.easing];t.easingFn=r(a[0],a[1],a[2],a[3],e),t._run()}},_run:function(){var t=this;f(t._raf),t._raf=l(function(){if(t.now=Date.now(),t.duration=t.now-t.start>=t.cfg.duration?t.cfg.duration:t.now-t.start,t.progress=t.easingFn(t.duration/t.cfg.duration),t.percent=t.duration/t.cfg.duration+t._hasFinishedPercent,t.percent>=1||t._stop){t.percent=t._stop&&t._stop.percent?t._stop.percent:1,t.duration=t._stop&&t._stop.duration?t._stop.duration:t.duration;var n={percent:t.percent};return t.trigger("stop",n),void(t.percent>=1&&(t.isfinished=!0,t.trigger("end",{percent:1})))}t.trigger("run",{percent:t.progress}),t._run()})},stop:function(){var t=this;t._stop={percent:t.percent,now:t.now},f(t._raf)}}),"object"==typeof module&&module.exports?e=i:i}({}),r=function(r){function i(t){return Math.round(1e5*parseFloat(t))/1e5}function a(){return{translateX:0,translateY:0,rotate:0,skewX:0,skewY:0,scaleX:1,scaleY:1}}function o(t){return t=t.split(/,/),t=Array.prototype.map.call(t,function(t){return i(t)})}function c(t){t=o(t);var n,e,r,a=t[0],s=t[1],c=t[2],l=t[3];return a*l-s*c?(n=Math.sqrt(a*a+s*s),r=(a*c+s*l)/(a*l-c*s),e=(a*l-s*c)/n,s*c>a*l&&(r=-r,n=-n)):n=e=r=0,{translateX:i(t[4]),translateY:i(t[5]),rotate:i(180*Math.atan2(s,a)/Math.PI),skewX:i(180*Math.atan(r)/Math.PI),skewY:0,scaleX:i(n),scaleY:i(e)}}function l(t){t=t.split(")");for(var n,e,r,s=h.trim,o=-1,l=t.length-1,u=a();++o<l;)switch(n=t[o].split("("),e=s(n[0]),r=n[1],e){case"translateX":case"translateY":case"scaleX":case"scaleY":u[e]=i(r);break;case"translate":case"translate3d":r=r.split(","),u.translateX=i(r[0]),u.translateY=i(r[1]||0);break;case"scale":r=r.split(","),u.scaleX=i(r[0]),u.scaleY=i(r[1]||r[0]);break;case"matrix":return c(r)}return u}function u(t,n){if(t&&n&&n.css){var e=this;e.cfg=n,e.el=t;{var r=n.duration||0,i=n.easing||"ease";n.delay||0}return n.run&&(e.timer=e.timer||new g({duration:Math.round(r),easing:i}),e.timer.on("run",n.run)),e._bindEvt(),e}}function f(t,n){var e=l(t),r=l(n),i={};for(var a in r)i[a]={prevVal:e[a],newVal:r[a]};return i}function d(t,n,e,r,i){e=isNaN(Number(e))?0:Number(e);var a=(r-e)*i+e;p(t,n,a)}function p(t,n,e){switch(n){case"scrollTop":case"scrollLeft":t[n]=e;break;case"transform":t.style[_]=e;case"opacity":t.style[n]=e}}var h=t,g=e,m=s,v=n,_=h.prefixStyle("transform"),x=h.prefixStyle("transition"),y=(h.prefixStyle("transitionDuration"),h.prefixStyle("transformOrigin"),h.vendor?h.prefixStyle("transitionEnd"):"transitionend"),b=(h.vendor?["-",h.vendor,"-transform"].join(""):"transform","translateX({translateX}px) translateY({translateY}px) translateZ(0)"),w={transform:!0,opacity:!0,scrollTop:!0,scrollLeft:!0};return h.extend(u,v,{run:function(){var t=this,n=t.cfg,e=t.el,r=n.duration||0,i=n.easing||"ease",a=n.delay||0;if(t.__isTransitionEnd=!1,clearTimeout(t.__itv),t.timer&&t.timer.run(),r<=g.MIN_DURATION){for(var s in n.css)p(e,s,n.css[s]);return t.stop(),void t.__handlers.stop.call(t)}if(n.useTransition){e.style[x]=h.substitute("all {duration}ms {easing} {delay}ms",{duration:Math.round(r),easing:m.format(i),delay:a});for(var s in n.css)p(e,s,n.css[s]);t.__itv=setTimeout(function(){t.__isTransitionEnd||(t.__isTransitionEnd=!0,t.trigger("transitionend"))},Number(r)+60)}else{var o=window.getComputedStyle(e);if(n.css.transform){{t.transmap=f(o[_],n.css.transform)}t.timer&&t.timer.off("run",t.__handlers.transRun),t.timer&&t.timer.on("run",t.__handlers.transRun,t)}}return t},_transitionEndHandler:function(){var t=this;t.stop(),t.__handlers.stop.call(t)},__handlers:{transRun:function(t){var n=this,e=n.transmap,r=n.el,i={};for(var a in e)i[a]=(e[a].newVal-e[a].prevVal)*t.percent+e[a].prevVal;var s=h.substitute(b+" scale({scaleX},{scaleY})",i);r.style[_]=s},stop:function(){var t=this,n=t.cfg;n.end&&n.end({percent:1})}},_bindEvt:function(){var t=this,n=t.cfg;t.el.addEventListener(y,function(n){t.__isTransitionEnd=!0,n.target===n.currentTarget&&t.trigger("transitionend",n)}),t.on("transitionend",t._transitionEndHandler,t);var e=function(t){for(var e in n.css)/transform/.test(e)||d(el,e,computeStyle[e],n.css[e],t.percent)};t.timer&&t.timer.on("run",e),t.timer&&t.timer.on("stop",t.__handlers.stop,t)},stop:function(){var t=this;if(t.cfg.useTransition&&t.cfg.duration>g.MIN_DURATION){var n=window.getComputedStyle(this.el);for(var e in t.cfg.css)if(w[e]){var r=/transform/.test(e)?n[_]:n[e];p(t.el,e,h.substitute(b+" scale({scaleX},{scaleY})",l(r)))}t.el.style[x]="none"}return t.timer&&t.timer.stop()&&t.timer.reset(),t},reset:function(t){var n=this;return h.mix(n.cfg,t),this.timer&&n.timer.reset({duration:Math.round(n.cfg.duration),easing:n.cfg.easing}),n}}),"object"==typeof module&&module.exports?r=u:u}({}),i=function(e){var r=t,i=n,a=300,s=function(t){s.superclass.constructor.call(this,t),this.userConfig=r.mix({minScale:1,maxScale:2,duration:a},t)};if(r.extend(s,i,{pluginId:"scale",pluginInitializer:function(t){var n=this;return n.scale=1,n.xscroll=t.render(),n.initialContainerWidth=t.containerWidth,n.initialContainerHeight=t.containerHeight,n.minScale=n.userConfig.minScale||Math.max(t.width/t.containerWidth,t.height/t.containerHeight),n.maxScale=n.userConfig.maxScale||1,n._bindEvt(),n},pluginDestructor:function(){var t=this,n=t.xscroll;return n.off("doubletap",t._doubleTapHandler,t),n.off("pinchstart",t._pinchStartHandler,t),n.off("pinch",t._pinchHandler,t),n.off("pinchend",t._pinchEndHandler,t),t},_doubleTapHandler:function(t){var n=this,e=n.xscroll,r=n.userConfig.minScale,i=n.userConfig.maxScale;return n.originX=(t.center.x-e.x)/e.containerWidth,n.originY=(t.center.y-e.y)/e.containerHeight,e.scale>n.minScale?n.scaleTo(r,n.originX,n.originY,200):n.scaleTo(i,n.originX,n.originY,200),n},_pinchStartHandler:function(t){var n=this,e=n.xscroll;e.mc.get("pan").set({enable:!1}),e.stop(),n.isScaling=!1,n.scale=e.scale,n.originX=(t.center.x-e.x)/e.containerWidth,n.originY=(t.center.y-e.y)/e.containerHeight},_pinchHandler:function(t){var n=this,e=n.scale,r=n.xscroll,i=n.originX,a=n.originY,s=e*t.scale;s<=n.userConfig.minScale&&(s=.5*n.userConfig.minScale*Math.pow(2,s/n.userConfig.minScale)),s>=n.userConfig.maxScale&&(s=2*n.userConfig.maxScale*Math.pow(.5,n.userConfig.maxScale/s)),n._scale(s,i,a),n.xscroll.translate(r.x,r.y,s)},_pinchEndHandler:function(){var t=this,n=t.originX,e=t.originY,r=t.xscroll;r.scale<t.minScale?t.scaleTo(t.minScale,n,e,a,"ease-out"):r.scale>t.maxScale?t.scaleTo(t.maxScale,n,e,a,"ease-out"):r.mc.get("pan").set({enable:!0})},_bindEvt:function(){var t=this,n=t.xscroll;return n.on("doubletap",t._doubleTapHandler,t),n.on("pinchstart",t._pinchStartHandler,t),n.on("pinch",t._pinchHandler,t),n.on("pinchend",t._pinchEndHandler,t),t},_scale:function(t,n,e){var r=this,i=r.xscroll,a=r.xscroll.boundry;if(i.scale!=t&&t){r.isScaling||(r.scaleBegin=i.scale,r.isScaling=!0,r.scaleBeginX=i.x,r.scaleBeginY=i.y),n&&(r.originX=n),e&&(r.originY=e);var s=t*r.initialContainerWidth,o=t*r.initialContainerHeight;i.containerWidth=Math.round(s>i.width?s:i.width),i.containerHeight=Math.round(o>i.height?o:i.height),i.scale=t;var c=n*(r.initialContainerWidth*r.scaleBegin-i.containerWidth)+r.scaleBeginX,l=e*(r.initialContainerHeight*r.scaleBegin-i.containerHeight)+r.scaleBeginY;c>a.left&&(c=a.left),l>a.top&&(l=a.top),c<a.right-i.containerWidth&&(c=a.right-i.containerWidth),l<a.bottom-i.containerHeight&&(l=a.bottom-i.containerHeight),i.x=c,i.y=l}},scaleTo:function(t,n,e,r,i,s){var o=this,c=o.xscroll;if(c.scale!=t&&t){var r=r||a,i=i||"ease-out";o._scale(t,n,e),c._animate("x","translateX("+c.x+"px) scale("+t+")",r,i,s),c._animate("y","translateY("+c.y+"px)",r,i,s),o.scaleHandler=o.scaleHandler||function(r){var i=(t-scaleStart)*r.percent+scaleStart;o.trigger("scale",{scale:i,origin:{x:n,y:e}})},o.scaleendHandler=o.scaleendHandler||function(){o.isScaling=!1,c.mc.get("pan").set({enable:!0}),o.trigger("scaleend",{type:"scaleend",scale:o.scale,origin:{x:n,y:e}})},c.__timers.x.timer.off("run",o._scaleHandler,o),c.__timers.x.timer.on("run",o._scaleHandler,o),c.__timers.x.timer.off("stop",o.scaleendHandler,o),c.__timers.x.timer.on("stop",o.scaleendHandler,o),o.trigger("scaleanimate",{scale:c.scale,duration:r,easing:i,offset:{x:c.x,y:c.y},origin:{x:n,y:e}})}}}),"object"==typeof module&&module.exports)e=s;else if(window.XScroll&&window.XScroll.Plugins)return XScroll.Plugins.Scale=s;return e}({})}();